<ion-content fullscreen="true" class="container">
  <ion-row class="login_top">
    <ion-col
      size="12"
      class="d-flex ion-wrap ion-justify-content-start headTop"
    >
      <ion-button
        [routerLink]="['/signin']"
        fill="clear"
        class="ion-no-padding m-0"
      >
        <ion-icon
          src="/assets/icon/back.svg"
          class="arrowback m-0"
          size=""
          slot="start"
        ></ion-icon>
      </ion-button>
      <h1 class="font24 fontw700 w-100 ion-text-black ion-text-start mb-0 mt-0">
        {{!addMode ? 'Update': 'Create'}} Account
      </h1>
    </ion-col>
  </ion-row>
  <ion-grid class="login_center position-relative">
    <form [formGroup]="ngForm" class="signup-form">
      <ion-row>
        <ion-col size="12" class="px-0 w-100">
          <ion-item class="customInput">
            <ion-label position="floating" class="font18 mt-0 redDot"
              >Username<span class="required"></span
            ></ion-label>
            <ion-input
            [disabled]="!addMode"
              name="username"
              formControlName="username"
              autocomplete="new-password"
              [ngClass]='{"shake-effect-apply": shakeEffect, "has-error": f["username"].dirty && f["username"].touched && f["username"].errors}'
              color="dark"
              required="true"
              type="text"
              placeholder="Enter Username"
            ></ion-input>
          </ion-item>
          <div
            *ngIf="f['username'].invalid && (f['username'].dirty || f['username'].touched)"
          >
            <p
              *ngIf="f['username'].errors && f['username'].errors['required']"
              class="text-red-light font12 fontwbold"
            >
              Username is required.
            </p>
          </div>

          <ion-item class="customInput">
            <ion-label position="floating" class="font18 mt-0"
              >Email<span class="required"></span
            ></ion-label>
            <ion-input
            [disabled]="!addMode"
              type="email"
              name="email"
              formControlName="email"
              autocomplete="new-email"
              [ngClass]='{"shake-effect-apply": shakeEffect, "has-error": f["email"].dirty && f["email"].touched && f["email"].errors}'
              color="dark"
              required="true"
              placeholder="Enter Email"
            ></ion-input>
          </ion-item>
          <div
            *ngIf="f['email'].invalid && (f['email'].dirty || f['email'].touched)"
          >
            <p
              *ngIf="f['email'].errors && f['email'].errors['required']"
              class="text-red-light font12 fontwbold"
            >
              Email is required.
            </p>
            <p
              *ngIf="f['email'].errors && f['email'].errors['pattern']"
              class="text-red-light font12 fontwbold"
            >
              Invalid email
            </p>
          </div>

          <ion-item class="customInput">
            <ion-label position="floating" class="font18 mt-0"
              >Password<span class="required"></span
            ></ion-label>
            <ion-input
            [disabled]="!addMode"
              name="password"
              type="password"
              autocomplete="new-password"
              [ngClass]='{"shake-effect-apply": shakeEffect, "has-error": f["password"].dirty && f["password"].touched && f["password"].errors}'
              placeholder="Enter Password"
              formControlName="password"
            ></ion-input>
          </ion-item>
          <div
            *ngIf="f['password'].invalid && (f['password'].dirty || f['password'].touched)"
          >
          <p *ngIf="f['password'].errors && f['password'].errors['required']" class="text-red-light font12 fontwbold">Passowrd is required.</p>
          <p *ngIf="f['password'].errors && f['password'].errors['minlength']" class="text-red-light font12 fontwbold">Password must be min 8 characters.</p>
          </div>

          <ion-item class="customInput">
            <ion-label position="floating" class="font18 mt-0"
              >Confirm Password<span class="required"></span
            ></ion-label>
            <ion-input
            [disabled]="!addMode"
              name="confirmPassword"
              type="password"
              autocomplete="new-password"
              [ngClass]='{"shake-effect-apply": shakeEffect, "has-error": f["confirmPassword"].dirty && f["confirmPassword"].touched && f["confirmPassword"].errors}'
              placeholder="Retype Password"
              formControlName="confirmPassword"
            ></ion-input>
          </ion-item>
          <div
            *ngIf="f['confirmPassword'].invalid && (f['confirmPassword'].dirty || f['confirmPassword'].touched)"
          >
          <p *ngIf="f['confirmPassword'].errors && f['confirmPassword'].errors['required']" class="text-red-light font12 fontwbold">Retype Password is required.</p>
          <p *ngIf="f['confirmPassword'].errors && f['confirmPassword'].errors['minlength']" class="text-red-light font12 fontwbold">Retype Password must be min 8 characters.</p>
          <p *ngIf="f['confirmPassword'].errors && f['confirmPassword'].errors['confirmPasswordValidator']" class="text-red-light font12 fontwbold">Passsword and Confirm Password didn't match.</p>
          </div>

          <div
            class="
              d-flex
              w-100
              ion-align-items-center ion-justify-content-center
              pt-40
            "
          >
            <ion-button
            [disabled]="!addMode"
              (click)="handleNextClick()"
              color="light"
              fill="clear"
              class="
                btn-primary
                ion-no-margin ion-no-padding
                text-white
                fontw700
                font17
                ion-text-center
              "
            >
              <span
                >NEXT
                <ion-spinner
                  *ngIf="showLoadingSpin"
                  style="
                    width: 20px;
                    height: 20px;
                    color: white;
                    margin-left: 10px;
                  "
                  name="circular"
                ></ion-spinner
              ></span>
            </ion-button>
          </div>
        </ion-col>
      </ion-row>
    </form>
  </ion-grid>
</ion-content>
<ion-footer *ngIf="addMode && showSignup" class="ion-no-border ion-color-white">
  <ion-grid class="">
    <ion-row>
      <ion-col
        size="12"
        class="d-flex ion-wrap ion-justify-content-center pt-0 pb-0 px-30 mb-0"
      >
        <div
          class="
            d-flex
            flex-column
            w-100
            ion-align-items-center ion-justify-content-center
          "
        >
          <p
            class="
              font14
              w-100
              fontw700
              ion-text-black ion-text-center
              mt-0
              mb-20
              lh16
              text-uppercase
            "
          >
            Already have an account?
          </p>
          <ion-button
            [routerLink]="['/signin']"
            color="light"
            fill="clear"
            class="
              btn-line
              ion-no-margin ion-no-padding
              text-white
              fontw700
              font17
              ion-text-center
            "
          >
            <span>SIGN IN</span>
          </ion-button>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>
